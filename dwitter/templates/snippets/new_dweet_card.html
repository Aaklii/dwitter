{% load subdomainurls %}
<div class=submit-box>
  <div class=canvas-iframe-container-wrapper
    id="submit-preview">
    <div class=canvas-iframe-container 
      id="iframe-container-submit">
      <iframe class="dweetiframe" id=preview-iframe src="{% url 'blank_dweet' subdomain='dweet' %}" sandbox="allow-scripts"></iframe>
    </div>
  </div>
  <div id=click-the-code>
    <b>Edit the code to start the fun or browse through other people's demos below.</b>
    Code available at <a href="http://github.com/lionleaf/dwitter">github.com/lionleaf/dwitter</a>. Issues are welcome! :D
  </div>
  <code>
    function u(t){
  </code>
  <form action="{% url 'dweet' %}" method="post">
    {% csrf_token %}
    <div class=dweet-code>
      <textarea
        autocorrect="off" autocapitalize="off" spellcheck="false"
        name=code
        class=code-input
        rows=4
        id=editor
        >c.width=1920; /* clear the canvas */
for(i=0;i<9;i++)
x.fillRect(400+i*100+S(t)*300, 400, 50, 200) /* draw 50x200 rects */</textarea>
      <div class=character-count>122/140</div>
    </div>
    <code>
      }
    </code>
    <br />
    {% if request.user.is_authenticated %}
    <input  
    class=dweet-button
    type="submit" 
    value="Dweet!" />
    {% else %}
    <p> Please <a href="{% url 'auth_login'  %}" >log in</a> (or <a href="{% url 'register'  %}" >register</a>) to post a dweet (copy-paste the code somewhere safe to save it meanwhile) </p>
    {% endif %}
  </form>
  <br />
  <code id=submit-help>
    u(t) is called 60 times per second.
    t: Elapsed time in seconds.
    S: Shorthand for Math.sin.
    C: Shorthand for Math.cos.
    T: Shorthand for Math.tan.
    R: Function that generates rgba-strings, usage ex.: R(255, 255, 255, 0.5)
    c: A 1920x1080 canvas.
    x: A 2D context for that canvas. 
  </code>
</div>
